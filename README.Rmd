---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Travis-CI Build Status](https://travis-ci.org/kvantas/hydroscoper.svg?branch=master)](https://travis-ci.org/kvantas/hydroscoper)
[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/kvantas/hydroscoper?branch=master&svg=true)](https://ci.appveyor.com/project/kvantas/hydroscoper)
[![codecov](https://codecov.io/github/kvantas/hydroscoper/branch/master/graphs/badge.svg)](https://codecov.io/gh/kvantas/hydroscoper) 
[![DOI](https://zenodo.org/badge/114094911.svg)](https://zenodo.org/badge/latestdoi/114094911)


# hydroscoper

The goal of **hydroscoper** is to provide an interface to the Greek National Databank for Hydrological and Meteorological Information, [Hydroscope](<http://www.hydroscope.gr/>). It provides functions for downloading stations and time series data.

The stations and time series data in Hydroscope are in Greek, so this package transliterates the Unicode text to Latin, and translates various Greek terms to English. Finally, the **hydroscoper** provides a function to convert raw time series' data into a tidy dataframe.

## Installation

You can install **hydroscoper** from github with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("kvantas/hydroscoper")
```

## Stations list

This is a basic example which shows you how to get the stations list from the Hydroscope's Ministry of Environment and Energy database (subdomain **kyy**):

```{r example stations}
library(hydroscoper)
stations <- get_stations(subdomain = "kyy")
head(stations[c("StationID", "WaterDivisionID", "Name", "Owner", "Type")])
```


## Stations coordinates

With the following code you can get the coordinates and the elevation for the stations from the Water Division of Crete, GR13:

```{r example coords}
library(plyr)
crete_stations <-subset(stations, WaterDivisionID == "GR13")
crete_coords <- ldply(crete_stations$StationID, function(x) {
  get_coords(subdomain = "kyy", stationID = x)})
head(crete_coords)
```

## Time series list

To get the time series list in a dataframe from the station **200292** you can use the following code:

```{r get time series}

ts_data <- get_timeseries(subdomain = "kyy", stationID = 200292)
ts_data[c("TimeSeriesID", "Variable", "TimeStep", "Unit", "StartDate","EndDate")]
```

## Raw data

You can get the time series **1022** rainfall data using:
```{r}
ts_raw <- get_data(subdomain = "kyy", timeID = 1022)
```

Let's create a plot for the rainfall data:
```{r plot data}
suppressPackageStartupMessages(library(ggplot2))
ggplot(data = ts_raw, aes(x = Date, y = Value))+
  geom_line()+
  labs(title="Daily rainfall for station 200292",
       x="Date", y = "Rain (mm)")+
  theme_classic()

```

