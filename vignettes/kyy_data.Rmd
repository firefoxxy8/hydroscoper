---
title: "Using hydroscoper to get stations' and time-series' data"
author: "Konstantinos Vantas"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using hydroscoper to get stations' and time-series' data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Introduction

This vignette shows how to create a tidy dataframe for the stations' and time-series' data from Hydroscope. The subdomain of Hydroscope that we will aplly the package's functions is **http:/kyy.hydroscope.gr** (Ministry of Environment and Energy).

## Get stations values

The following code shows how to create a tidy dataframe with stations' data, including their coordinates and elevations.

```{r stations df creation, eval = FALSE}
# load libraries
library(hydroscoper)
library(plyr)

# set subdomain
subdomain <- "kyy"

# get stations data
stations <- get_stations(subdomain)
 
# get coordinates and elevation
coords <- ldply(stations$StationID, function(id) {
   get_coords(subdomain, id)
})

# merge data
stations <- merge(stations, coords, by = "StationID", all.x = TRUE)

# show data
head(stations)
```

## Get time-series values

The following code shows how to create a tidy dataframe with all the time series from the subdomain.

```{r timeseries creation, eval = FALSE}
# create time series' dataframe
timeseries <- ldply(stations$StationID, function(id) {
  get_timeseries(subdomain, id)
})

# view time series
head(timeseries)
```
